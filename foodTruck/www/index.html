<html>
<head>
    <title>Principal</title>
    	<meta charset="UTF-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <!--<link rel="stylesheet" type="text/css" href="css/index.css" />-->
        <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />
        <link rel="stylesheet" type="text/css" href="css/bootstrap-theme.css" />
        <link rel="stylesheet" type="text/css" href="css/font-awesome.css" />
        <link rel="stylesheet" type="text/css" href="css/meuStyle.css" />
        
        <script type="text/javascript" src="js/gmaps.js"></script>
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/index.js"></script>

        <script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
        <script type="text/javascript" src="js/parse-1.6.7.js"></script>
</head>
<body>
    <div class="container-fluid">
    	<div class="row">
            <div class="col-xs-12 col-md-12">
                <div class="principal center">
                    <span>teste</span>                  
                </div>
            </div>
            <div class="col-xs-12 col-md-12">
                <div class="btnFooter center">
                    <a onclick="populaTabelaLocalizacao()"><span>Enviar Localiza&ccedil;&atilde;o</span></a>
                </div>
            </div>

            <div class="col-md-12" style="display:none" id="map">teste aqui</div>   
        </div>

    </div>

    <script type="text/javascript" charset="utf-8">

    function populaTabelaLocalizacao(){



   	 	Parse.initialize("4tghv6GjleCbjLsaAem8jH12IceJRr26qSAAsbka", "r3fXhrjJuCbASHszvQlmHm5A5tcdZaw98zp8znal");

		var foodTruck = Parse.Object.extend("FoodTruck");
		var foodTruckScore = new foodTruck();
		var position = pegaPosicao(position);

		if(position != undefined){
		
			foodTruckScore.save({
			  localizacao: position
			}, {
			  success: function(foodTruck) {
			    navigator.notification.alert('Enviado Com Sucesso', alertDismissed, 'Sucesso' ,'Ok');
			  },
			  error: function(foodTruck, error) {
			    // The save failed.
			    // error is a Parse.Error with an error code and message.
			   navigator.notification.alert('Error' + error.message , alertDismissed, 'Erro' ,'Ok');
			  }
			});

		}
    }


    function pegaPosicao(position){
    	 navigator.geolocation.getCurrentPosition(onSuccessPosition, onError);
    }

    function onSuccessPosition(position) {
        var element = position.coords.latitude + " , " + position.coords.longitude;
    }

     function onError(error) {
     	navigator.notification.alert("Error" + error.message , alertDismissed, "Erro" ,'Ok');
    }

    function alertDismissed() {
    // do something
	}	

    $(document).ready(function(){


    // Wait for device API libraries to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // device APIs are available
    //

    

    function onDeviceReady() {
        var options = { enableHighAccuracy: true };
        navigator.geolocation.getCurrentPosition(onSuccess, onError, options);
    }

    // onSuccess Geolocation
    //
    function onSuccess(position) {
        var element = document.getElementById('geolocation');
        $('.principal').html('Latitude: '  + position.coords.latitude     + '<br />' +
                                  'Longitude: ' + position.coords.longitude    + '<br />');
    }

    // onError Callback receives a PositionError object
    //
    function onError(error) {
        alert('code: '    + error.code    + '\n' +
              'message: ' + error.message + '\n');
    }
    });

    </script>
</body>
</html>